{% extends "base.html" %}
{% block content %}
<html>
<head>
    <title>Seeding Robot v.1 Testing</title>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Seeding Robot v.1 Testing</h1>
        </div>
        <div class="dashboard">
            <div class="section map">
                <h3>Leaflet Map</h3>
                <div id="map"></div>
            </div>
            <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
            <script src="https://cdn.socket.io/4.0.0/socket.io.min.js"></script>
            <script>
                var map = L.map('map').setView([51.505, -0.09], 13);
                var marker = L.marker([0, 0]).addTo(map);

                var socket = io.connect('http://' + document.domain + ':' + location.port + '/');

                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
                }).addTo(map);
            
                // Array to store robot's path
                var robotPath = [];
            
                // Function to update robot's position
                function updateRobotPosition(lat, lng) {
                    var newLatLng = [lat, lng];
                    robotPath.push(newLatLng);
            
                    // Draw the polyline
                    L.polyline(robotPath, {color: 'red'}).addTo(map);
            
                    // Optionally, set the view to the new position
                    map.setView(newLatLng);
                }
            
                // Example: Simulate robot movement with a timer
                var examplePositions = [
                    [51.505, -0.09],
                    [51.505, -0.08],
                    [51.506, -0.08],
                    [51.507, -0.08],
                    [51.507, -0.09]
                ];
            
                var i = 0;
                setInterval(function() {
                    if (i < examplePositions.length) {
                        updateRobotPosition(examplePositions[i][0], examplePositions[i][1]);
                        i++;
                    }
                });
            </script>
            
        </div>
    </div>
</body>
{% endblock %}
